<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News | EV Technical Insights</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--navy:#002B5B;--navy-dark:#001a38;--cyan:#00F2FF;--cyan-dim:rgba(0,242,255,0.15);--surface:#F9FAFB;--stone:#E5E7EB;--anthracite:#1F2937;--text-secondary:#6B7280;--success:#10B981;--font-headline:'Inter',sans-serif;--font-mono:'JetBrains Mono',monospace}
        body{font-family:var(--font-headline);background:var(--surface);color:var(--anthracite)}
        .container{max-width:1280px;margin:0 auto;padding:0 24px}
        .header{background:var(--navy);color:white;position:sticky;top:0;z-index:1000}
        .header-main{display:flex;justify-content:space-between;align-items:center;padding:16px 0}
        .logo{display:flex;align-items:center;gap:12px;text-decoration:none;color:white}
        .logo-icon{width:44px;height:44px;background:var(--cyan);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:24px}
        .logo-text{font-weight:800;font-size:20px}.logo-text span{color:var(--cyan)}
        .nav-links{display:flex;list-style:none;gap:8px}
        .nav-links a{color:rgba(255,255,255,0.85);text-decoration:none;font-size:14px;font-weight:500;padding:10px 16px;border-radius:6px;transition:all 0.2s}
        .nav-links a:hover{color:var(--cyan);background:rgba(0,242,255,0.1)}
        .nav-links a.active{background:var(--cyan);color:var(--navy)}
        .page-header{background:linear-gradient(135deg,var(--navy),var(--navy-dark));color:white;padding:48px 0}
        .page-header-content{display:flex;justify-content:space-between;align-items:flex-start}
        .page-header h1{font-size:36px;margin-bottom:8px}
        .page-subtitle{font-family:var(--font-mono);font-size:14px;color:rgba(255,255,255,0.7)}
        .translate-box{background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:8px;padding:12px 16px}
        .translate-label{font-size:11px;color:rgba(255,255,255,0.6);margin-bottom:6px;display:block}
        
        /* Stats Bar */
        .stats-bar{display:flex;gap:24px;margin-top:20px;flex-wrap:wrap}
        .stat-pill{background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);padding:8px 16px;border-radius:20px;font-family:var(--font-mono);font-size:12px;display:flex;align-items:center;gap:8px}
        .stat-pill strong{color:var(--cyan)}
        
        /* Filter Tabs */
        .filter-section{background:white;border-bottom:1px solid var(--stone);padding:16px 0;position:sticky;top:76px;z-index:100}
        .filter-row{display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap}
        .filter-tabs{display:flex;gap:6px;flex-wrap:wrap}
        .filter-tab{padding:8px 14px;border:2px solid var(--stone);border-radius:6px;font-size:12px;font-weight:600;background:white;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:4px}
        .filter-tab:hover{border-color:var(--navy)}
        .filter-tab.active{border-color:var(--cyan);background:var(--cyan);color:var(--navy)}
        .filter-tab .flag{font-size:14px}
        .search-box{position:relative}
        .search-box input{padding:10px 16px 10px 40px;border:2px solid var(--stone);border-radius:6px;font-size:13px;width:220px}
        .search-box input:focus{outline:none;border-color:var(--cyan)}
        .search-box::before{content:"ğŸ”";position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:14px}
        
        /* News Layout */
        .news-section{padding:40px 0 60px}
        .news-grid{display:grid;grid-template-columns:2fr 1fr;gap:32px}
        
        /* News Feed */
        .news-feed{display:flex;flex-direction:column;gap:20px}
        .news-card{background:white;border-radius:12px;border:1px solid var(--stone);overflow:hidden;transition:all 0.3s}
        .news-card:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,43,91,0.12);border-color:var(--cyan)}
        .news-card a{text-decoration:none;color:inherit;display:block}
        .news-card-inner{display:flex;gap:20px;padding:20px}
        .news-image{width:160px;height:120px;background:linear-gradient(135deg,var(--navy-dark),var(--navy));border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative}
        .news-image-placeholder{font-size:32px;opacity:0.3}
        .news-flag{position:absolute;top:8px;left:8px;font-size:16px}
        .news-content{flex:1;display:flex;flex-direction:column}
        .news-meta{display:flex;align-items:center;gap:10px;margin-bottom:8px}
        .news-source{font-family:var(--font-mono);font-size:10px;background:var(--navy);color:white;padding:3px 8px;border-radius:4px;font-weight:600}
        .news-category{font-family:var(--font-mono);font-size:10px;color:var(--text-secondary);background:var(--surface);padding:3px 8px;border-radius:4px}
        .news-date{font-family:var(--font-mono);font-size:11px;color:var(--text-secondary);margin-left:auto}
        .news-title{font-size:16px;font-weight:700;color:var(--navy);line-height:1.4;margin-bottom:8px}
        .news-excerpt{font-size:13px;color:var(--text-secondary);line-height:1.5;flex:1}
        .news-footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding-top:12px;border-top:1px solid var(--stone)}
        .news-lang{font-size:11px;color:var(--text-secondary)}
        .news-read-more{color:var(--cyan);font-weight:600;font-size:12px}
        
        /* Sidebar */
        .sidebar{display:flex;flex-direction:column;gap:20px}
        .sidebar-card{background:white;border-radius:12px;border:1px solid var(--stone);overflow:hidden}
        .sidebar-header{background:var(--navy);color:white;padding:14px 16px;font-size:13px;font-weight:700;display:flex;align-items:center;gap:8px}
        .sidebar-content{padding:12px}
        .quick-link{display:flex;align-items:center;gap:10px;padding:10px;border-radius:6px;text-decoration:none;color:var(--anthracite);transition:all 0.2s;border:1px solid transparent}
        .quick-link:hover{background:var(--cyan-dim);border-color:var(--cyan)}
        .quick-link-icon{width:32px;height:32px;background:var(--surface);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:14px}
        .quick-link-text{flex:1}
        .quick-link-title{font-size:12px;font-weight:600;margin-bottom:1px}
        .quick-link-desc{font-size:10px;color:var(--text-secondary)}
        
        /* Source Grid */
        .source-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
        .source-chip{display:flex;align-items:center;gap:6px;padding:8px;background:var(--surface);border-radius:6px;font-size:11px}
        .source-chip .flag{font-size:12px}
        .source-chip span{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        
        /* Loading */
        .loading{text-align:center;padding:60px 20px}
        .loading-spinner{width:40px;height:40px;border:4px solid var(--stone);border-top-color:var(--cyan);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 16px}
        @keyframes spin{to{transform:rotate(360deg)}}
        
        /* Footer */
        .footer{background:var(--navy-dark);color:white;padding:40px 0 24px}
        .footer-content{display:flex;justify-content:space-between;align-items:center}
        .footer-copyright{font-family:var(--font-mono);font-size:12px;color:rgba(255,255,255,0.5)}
        
        /* Google Translate Override */
        .goog-te-banner-frame{display:none !important}
        body{top:0 !important}
        .skiptranslate{display:none !important}
        .goog-te-gadget{font-family:var(--font-headline) !important}
        .goog-te-gadget-simple{background:transparent !important;border:none !important;padding:0 !important}
        .goog-te-gadget-simple span{color:white !important;font-size:13px !important}
        
        @media(max-width:1024px){.nav-links{display:none}.news-grid{grid-template-columns:1fr}.sidebar{order:-1}}
        @media(max-width:768px){.filter-tabs{overflow-x:auto;flex-wrap:nowrap;padding-bottom:8px}.news-card-inner{flex-direction:column}.news-image{width:100%;height:160px}.page-header-content{flex-direction:column;gap:20px}.search-box input{width:100%}}
    </style>
</head>
<body>
    <header class="header"><div class="container"><div class="header-main">
        <a href="index.html" class="logo"><div class="logo-icon">âš¡</div><div class="logo-text">EV Technical <span>Insights</span></div></a>
        <ul class="nav-links">
            <li><a href="dashboard.html">ğŸ“Š Dashboard</a></li>
            <li><a href="fahrzeuge.html">ğŸ”‹ Fahrzeuge</a></li>
            <li><a href="news.html" class="active">ğŸ“° News</a></li>
            <li><a href="laden.html">âš¡ Laden</a></li>
            <li><a href="ratgeber.html">ğŸ“‹ Ratgeber</a></li>
            <li><a href="service.html">ğŸ”§ Service</a></li>
            <li><a href="reichweite.html">ğŸ“ Reichweite</a></li>
        </ul>
    </div></div></header>

    <section class="page-header"><div class="container">
        <div class="page-header-content">
            <div>
                <h1>ğŸ“° EV News Hub</h1>
                <p class="page-subtitle">Live-News aus 25+ Quellen Â· Automatisch aktualisiert</p>
                <div class="stats-bar">
                    <div class="stat-pill">ğŸ“¡ <strong id="source-count">25</strong> Quellen</div>
                    <div class="stat-pill">ğŸŒ <strong>8</strong> LÃ¤nder</div>
                    <div class="stat-pill">ğŸ”„ <strong>Live</strong> RSS-Feeds</div>
                </div>
            </div>
            <div class="translate-box">
                <span class="translate-label">ğŸŒ Seite Ã¼bersetzen:</span>
                <div id="google_translate_element"></div>
            </div>
        </div>
    </div></section>

    <section class="filter-section"><div class="container">
        <div class="filter-row">
            <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all">ğŸŒ Alle</button>
                <button class="filter-tab" data-filter="dede"><span class="flag">ğŸ‡©ğŸ‡ª</span> DACH</button>
                <button class="filter-tab" data-filter="chch"><span class="flag">ğŸ‡¨ğŸ‡­</span> Schweiz</button>
                <button class="filter-tab" data-filter="eueu"><span class="flag">ğŸ‡ªğŸ‡º</span> EU</button>
                <button class="filter-tab" data-filter="hrrs"><span class="flag">ğŸ‡­ğŸ‡·</span> Balkan</button>
                <button class="filter-tab" data-filter="tech">ğŸ”§ Technik</button>
                <button class="filter-tab" data-filter="policy">âš–ï¸ Politik</button>
                <button class="filter-tab" data-filter="stats">ğŸ“Š Statistik</button>
            </div>
            <div class="search-box">
                <input type="text" id="search" placeholder="News durchsuchen...">
            </div>
        </div>
    </div></section>

    <main class="news-section"><div class="container">
        <div class="news-grid">
            <!-- Main Feed -->
            <div class="news-feed" id="news-feed">
                <div class="loading"><div class="loading-spinner"></div><p>News werden aus 25+ Quellen geladen...</p></div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Quick Resources -->
                <div class="sidebar-card">
                    <div class="sidebar-header">ğŸ”— Wichtige Ressourcen</div>
                    <div class="sidebar-content">
                        <a href="https://www.swiss-emobility.ch" target="_blank" class="quick-link">
                            <div class="quick-link-icon">ğŸ‡¨ğŸ‡­</div>
                            <div class="quick-link-text"><div class="quick-link-title">Swiss eMobility</div><div class="quick-link-desc">Verband & FÃ¶rderkarte CH</div></div>
                        </a>
                        <a href="https://ich-tanke-strom.ch" target="_blank" class="quick-link">
                            <div class="quick-link-icon">âš¡</div>
                            <div class="quick-link-text"><div class="quick-link-title">ich-tanke-strom.ch</div><div class="quick-link-desc">Ladestationen Schweiz</div></div>
                        </a>
                        <a href="https://alternative-fuels-observatory.ec.europa.eu" target="_blank" class="quick-link">
                            <div class="quick-link-icon">ğŸ‡ªğŸ‡º</div>
                            <div class="quick-link-text"><div class="quick-link-title">EAFO</div><div class="quick-link-desc">EU Infrastruktur-Daten</div></div>
                        </a>
                        <a href="https://www.acea.auto" target="_blank" class="quick-link">
                            <div class="quick-link-icon">ğŸ“Š</div>
                            <div class="quick-link-text"><div class="quick-link-title">ACEA</div><div class="quick-link-desc">EU Zulassungszahlen</div></div>
                        </a>
                        <a href="https://ev-volumes.com" target="_blank" class="quick-link">
                            <div class="quick-link-icon">ğŸŒ</div>
                            <div class="quick-link-text"><div class="quick-link-title">EV-Volumes</div><div class="quick-link-desc">Weltweite Verkaufszahlen</div></div>
                        </a>
                        <a href="https://www.iea.org/reports/global-ev-outlook-2024" target="_blank" class="quick-link">
                            <div class="quick-link-icon">ğŸ“ˆ</div>
                            <div class="quick-link-text"><div class="quick-link-title">IEA EV Outlook</div><div class="quick-link-desc">Globale Marktanalyse</div></div>
                        </a>
                    </div>
                </div>

                <!-- Active Sources -->
                <div class="sidebar-card">
                    <div class="sidebar-header">ğŸ“¡ Aktive Quellen</div>
                    <div class="sidebar-content">
                        <div class="source-grid">
                            <div class="source-chip"><span class="flag">ğŸ‡©ğŸ‡ª</span><span>Electrive</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡©ğŸ‡ª</span><span>Ecomento</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡©ğŸ‡ª</span><span>Elektroauto-News</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡©ğŸ‡ª</span><span>InsideEVs DE</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡©ğŸ‡ª</span><span>Nextmove</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡©ğŸ‡ª</span><span>Golem</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡ªğŸ‡º</span><span>CleanTechnica</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡ªğŸ‡º</span><span>Electrek</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡ªğŸ‡º</span><span>GreenCarReports</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡ªğŸ‡º</span><span>Autovista24</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡ªğŸ‡º</span><span>T&E</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡ªğŸ‡º</span><span>Sustainable Bus</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡­ğŸ‡·</span><span>Strujni Krug</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡­ğŸ‡·</span><span>Autonet.hr</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡·ğŸ‡¸</span><span>Balkan Green</span></div>
                            <div class="source-chip"><span class="flag">ğŸ‡·ğŸ‡¸</span><span>Emobilnost</span></div>
                        </div>
                    </div>
                </div>

                <!-- Expert Blogs -->
                <div class="sidebar-card">
                    <div class="sidebar-header">ğŸ‘¤ Experten & Foren</div>
                    <div class="sidebar-content">
                        <a href="https://www.goingelectric.de/forum/" target="_blank" class="quick-link">
                            <div class="quick-link-icon">ğŸ’¬</div>
                            <div class="quick-link-text"><div class="quick-link-title">GoingElectric Forum</div><div class="quick-link-desc">GrÃ¶sste DE Community</div></div>
                        </a>
                        <a href="https://tff-forum.de" target="_blank" class="quick-link">
                            <div class="quick-link-icon">ğŸš—</div>
                            <div class="quick-link-text"><div class="quick-link-title">TFF Forum</div><div class="quick-link-desc">Tesla Fahrer & Freunde</div></div>
                        </a>
                        <a href="https://www.mobilityhouse.com/de_de/magazin" target="_blank" class="quick-link">
                            <div class="quick-link-icon">ğŸ </div>
                            <div class="quick-link-text"><div class="quick-link-title">Mobility House</div><div class="quick-link-desc">V2G & Energiemanagement</div></div>
                        </a>
                        <a href="https://www.handelsblatt.com/edison/" target="_blank" class="quick-link">
                            <div class="quick-link-icon">ğŸ’¡</div>
                            <div class="quick-link-text"><div class="quick-link-title">Edison</div><div class="quick-link-desc">Handelsblatt Innovation</div></div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div></main>

    <footer class="footer"><div class="container"><div class="footer-content">
        <a href="index.html" class="logo"><div class="logo-icon">âš¡</div><div class="logo-text">EV Technical <span>Insights</span></div></a>
        <p class="footer-copyright">Â© 2025 EV Technical Insights Â· News via RSS</p>
    </div></div></footer>

    <!-- Google Translate -->
    <script>
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
            pageLanguage: 'de',
            includedLanguages: 'de,en,fr,it,hr,sr,es,pt,nl,pl,cs,hu,ro,bg,sl',
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
            autoDisplay: false
        }, 'google_translate_element');
    }
    </script>
    <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
    // =============================================
    // RSS FEED CONFIGURATION
    // =============================================
    
    const RSS_FEEDS = [
        // ğŸ‡©ğŸ‡ª DACH - German Sources
        { name: 'Electrive', url: 'https://www.electrive.net/feed/', region: 'dede', category: 'news', lang: 'DE', flag: 'ğŸ‡©ğŸ‡ª' },
        { name: 'Elektroauto-News', url: 'https://www.elektroauto-news.net/feed', region: 'dede', category: 'news', lang: 'DE', flag: 'ğŸ‡©ğŸ‡ª' },
        { name: 'Ecomento', url: 'https://ecomento.de/feed/', region: 'dede', category: 'news', lang: 'DE', flag: 'ğŸ‡©ğŸ‡ª' },
        { name: 'InsideEVs DE', url: 'https://insideevs.de/rss/news/all/', region: 'dede', category: 'news', lang: 'DE', flag: 'ğŸ‡©ğŸ‡ª' },
        { name: 'Nextmove', url: 'https://nextmove.de/feed/', region: 'dede', category: 'tech', lang: 'DE', flag: 'ğŸ‡©ğŸ‡ª' },
        { name: 'Golem E-Mobility', url: 'https://rss.golem.de/rss.php?tp=auto&feed=RSS2.0', region: 'dede', category: 'tech', lang: 'DE', flag: 'ğŸ‡©ğŸ‡ª' },
        
        // ğŸ‡¨ğŸ‡­ Switzerland
        { name: 'Swiss eMobility', url: 'https://www.swiss-emobility.ch/de/feed/', region: 'chch', category: 'policy', lang: 'DE', flag: 'ğŸ‡¨ğŸ‡­' },
        
        // ğŸ‡ªğŸ‡º EU-wide / International
        { name: 'Electrive EN', url: 'https://www.electrive.com/feed/', region: 'eueu', category: 'news', lang: 'EN', flag: 'ğŸ‡ªğŸ‡º' },
        { name: 'CleanTechnica', url: 'https://cleantechnica.com/feed/', region: 'eueu', category: 'news', lang: 'EN', flag: 'ğŸ‡ªğŸ‡º' },
        { name: 'Electrek', url: 'https://electrek.co/feed/', region: 'eueu', category: 'news', lang: 'EN', flag: 'ğŸ‡ºğŸ‡¸' },
        { name: 'Green Car Reports', url: 'https://www.greencarreports.com/rss', region: 'eueu', category: 'tech', lang: 'EN', flag: 'ğŸ‡ºğŸ‡¸' },
        { name: 'Sustainable Bus', url: 'https://www.sustainable-bus.com/feed/', region: 'eueu', category: 'news', lang: 'EN', flag: 'ğŸ‡ªğŸ‡º' },
        { name: 'Transport & Environment', url: 'https://www.transportenvironment.org/feed/', region: 'eueu', category: 'policy', lang: 'EN', flag: 'ğŸ‡ªğŸ‡º' },
        { name: 'Autovista24', url: 'https://autovista24.autovistagroup.com/feed/', region: 'eueu', category: 'stats', lang: 'EN', flag: 'ğŸ‡ªğŸ‡º' },
        
        // ğŸ‡­ğŸ‡· Croatia
        { name: 'Strujni Krug', url: 'https://strujnikrug.hr/feed/', region: 'hrrs', category: 'news', lang: 'HR', flag: 'ğŸ‡­ğŸ‡·' },
        { name: 'Autonet.hr', url: 'https://www.autonet.hr/feed/', region: 'hrrs', category: 'news', lang: 'HR', flag: 'ğŸ‡­ğŸ‡·' },
        
        // ğŸ‡·ğŸ‡¸ Serbia / Balkan
        { name: 'Balkan Green Energy', url: 'https://balkangreenenergynews.com/feed/', region: 'hrrs', category: 'news', lang: 'EN', flag: 'ğŸ‡·ğŸ‡¸' },
        { name: 'Emobilnost', url: 'https://emobilnost.rs/feed/', region: 'hrrs', category: 'news', lang: 'SR', flag: 'ğŸ‡·ğŸ‡¸' },
        { name: 'Energetski Portal', url: 'https://www.energetskiportal.rs/feed/', region: 'hrrs', category: 'tech', lang: 'SR', flag: 'ğŸ‡·ğŸ‡¸' },
    ];

    const RSS2JSON_API = 'https://api.rss2json.com/v1/api.json?rss_url=';
    
    let allNews = [];
    let currentFilter = 'all';
    let searchQuery = '';

    // Load all feeds
    async function loadAllFeeds() {
        document.getElementById('source-count').textContent = RSS_FEEDS.length;
        
        const feedPromises = RSS_FEEDS.map(feed => loadFeed(feed));
        const results = await Promise.allSettled(feedPromises);
        
        allNews = results
            .filter(r => r.status === 'fulfilled' && r.value.length > 0)
            .flatMap(r => r.value)
            .sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
        
        renderNews();
    }

    // Load single feed
    async function loadFeed(feed) {
        try {
            const response = await fetch(RSS2JSON_API + encodeURIComponent(feed.url));
            const data = await response.json();
            
            if (data.status === 'ok') {
                return data.items.slice(0, 5).map(item => ({
                    title: item.title,
                    link: item.link,
                    pubDate: item.pubDate,
                    description: item.description?.replace(/<[^>]*>/g, '').slice(0, 180) + '...',
                    source: feed.name,
                    region: feed.region,
                    category: feed.category,
                    lang: feed.lang,
                    flag: feed.flag,
                    thumbnail: item.thumbnail || item.enclosure?.link || null
                }));
            }
            return [];
        } catch (e) {
            console.warn(`Feed ${feed.name} nicht erreichbar`);
            return [];
        }
    }

    // Render news
    function renderNews() {
        const feed = document.getElementById('news-feed');
        let news = allNews;
        
        // Apply filter
        if (currentFilter !== 'all') {
            if (['tech', 'policy', 'stats'].includes(currentFilter)) {
                news = news.filter(n => n.category === currentFilter);
            } else {
                news = news.filter(n => n.region === currentFilter);
            }
        }
        
        // Apply search
        if (searchQuery) {
            const query = searchQuery.toLowerCase();
            news = news.filter(n => 
                n.title.toLowerCase().includes(query) || 
                n.source.toLowerCase().includes(query)
            );
        }

        if (news.length === 0) {
            feed.innerHTML = '<div class="loading"><p>Keine News gefunden. Versuchen Sie einen anderen Filter.</p></div>';
            return;
        }

        feed.innerHTML = news.slice(0, 30).map(item => `
            <article class="news-card">
                <a href="${item.link}" target="_blank">
                    <div class="news-card-inner">
                        <div class="news-image">
                            <span class="news-image-placeholder">ğŸ“°</span>
                            <span class="news-flag">${item.flag}</span>
                        </div>
                        <div class="news-content">
                            <div class="news-meta">
                                <span class="news-source">${item.source}</span>
                                <span class="news-category">${getCategoryLabel(item.category)}</span>
                                <span class="news-date">${formatDate(item.pubDate)}</span>
                            </div>
                            <h3 class="news-title">${item.title}</h3>
                            <p class="news-excerpt">${item.description}</p>
                            <div class="news-footer">
                                <span class="news-lang">${item.flag} ${item.lang}</span>
                                <span class="news-read-more">Weiterlesen â†’</span>
                            </div>
                        </div>
                    </div>
                </a>
            </article>
        `).join('');
    }

    // Helper: Format date
    function formatDate(dateStr) {
        const date = new Date(dateStr);
        const now = new Date();
        const diffHours = Math.floor((now - date) / (1000 * 60 * 60));
        
        if (diffHours < 1) return 'Gerade eben';
        if (diffHours < 24) return `Vor ${diffHours}h`;
        if (diffHours < 48) return 'Gestern';
        return date.toLocaleDateString('de-CH', { day: '2-digit', month: 'short' });
    }

    // Helper: Category label
    function getCategoryLabel(category) {
        const labels = { 'news': 'ğŸ“° News', 'tech': 'ğŸ”§ Technik', 'policy': 'âš–ï¸ Politik', 'stats': 'ğŸ“Š Statistik' };
        return labels[category] || category;
    }

    // Filter tabs
    document.querySelectorAll('.filter-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            currentFilter = tab.dataset.filter;
            renderNews();
        });
    });

    // Search
    let searchTimeout;
    document.getElementById('search').addEventListener('input', (e) => {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            searchQuery = e.target.value;
            renderNews();
        }, 300);
    });

    // Initialize
    loadAllFeeds();
    </script>
</body>
</html>
